(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6943c3ac"],{5383:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",[e._v("修改学生")]),s("add-or-edit",{attrs:{sid:e.id},on:{submit:e.handleSubmit}})],1)},r=[],a=s("cc80"),i=s.n(a),u=(s("4453"),s("ee95")),c=s("bf50"),o={components:{AddOrEdit:c["a"]},data:function(){return{id:this.$route.params.id}},methods:{handleSubmit:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/student/"+this.id,{method:"put",body:i()(t),headers:{"content-type":"application/json"}});case 2:this.$message({message:"修改学生成功",type:"success"});case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},l=o,d=s("17cc"),p=Object(d["a"])(l,n,r,!1,null,null,null);t["default"]=p.exports},"5ab7":function(e,t,s){var n=s("836e"),r=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},bf50:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{width:"400px"}},[s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"stuForm",attrs:{"label-width":"100px",model:e.student,rules:e.rules}},[s("el-form-item",{attrs:{label:"学生姓名",prop:"name"}},[s("el-input",{model:{value:e.student.name,callback:function(t){e.$set(e.student,"name",t)},expression:"student.name"}})],1),s("el-form-item",{attrs:{label:"学生性别"}},[s("el-switch",{attrs:{"active-text":"男","inactive-text":"女","active-value":"男","inactive-value":"女"},model:{value:e.student.gender,callback:function(t){e.$set(e.student,"gender",t)},expression:"student.gender"}})],1),s("el-form-item",{attrs:{label:"学生年龄",prop:"age"}},[s("el-input",{attrs:{type:"number"},model:{value:e.student.age,callback:function(t){e.$set(e.student,"age",e._n(t))},expression:"student.age"}})],1),s("el-form-item",{attrs:{label:"电话号码",prop:"phone"}},[s("el-input",{model:{value:e.student.phone,callback:function(t){e.$set(e.student,"phone",t)},expression:"student.phone"}})],1),s("el-form-item",{attrs:{label:"家庭住址",prop:"address"}},[s("el-input",{model:{value:e.student.address,callback:function(t){e.$set(e.student,"address",t)},expression:"student.address"}})],1),s("el-form-item",{attrs:{label:"所属班级",prop:"class"}},[s("el-select",{attrs:{placeholder:"请选择班级"},model:{value:e.student.class,callback:function(t){e.$set(e.student,"class",t)},expression:"student.class"}},e._l(e.classes,function(e){return s("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})}),1)],1),s("el-form-item",{attrs:{label:"所学课程",prop:"course"}},[s("el-select",{attrs:{placeholder:"请选择课程"},model:{value:e.student.course,callback:function(t){e.$set(e.student,"course",t)},expression:"student.course"}},e._l(e.courses,function(e){return s("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})}),1)],1),s("el-form-item",{attrs:{label:""}},[s("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)],1)},r=[],a=(s("4453"),s("ee95")),i={props:["sid"],data:function(){return{student:{name:"",class:"",course:"",gender:"男",phone:"",age:"",address:""},isLoading:!1,rules:{name:[{required:!0,message:"请输入学生姓名",trigger:"change"},{min:2,max:5,message:"姓名字符在 2 到 5 个字符之间",trigger:"change"}],age:[{required:!0,message:"请输入学生年龄",trigger:"change"}],phone:[{required:!0,message:"请输入电话号码",trigger:"change"},{validator:function(e,t,s){/^1\d{10}$/.test(t)?s():s(new Error("手机号必须是1开头的11位数字"))},trigger:"change"}],address:[{required:!0,message:"请输入家庭住址",trigger:"change"}],class:[{required:!0,message:"请选择所在班级",trigger:"change"}],course:[{required:!0,message:"请选择所属课程",trigger:"change"}]}}},computed:{courses:{get:function(){return this.$store.state.course.data},set:function(e){this.$store.commit("course/setData",e)}},classes:{get:function(){return this.$store.state.class.data},set:function(e){this.$store.commit("class/setData",e)}}},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.isLoading=!0,!this.sid){e.next=9;break}return e.next=4,fetch("/api/student/"+this.sid);case 4:return t=e.sent,e.next=7,t.json();case 7:t=e.sent,this.student=t;case 9:this.$store.dispatch("course/fetch"),this.$store.dispatch("class/fetch"),this.isLoading=!1;case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{handleSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs.stuForm.validate();case 3:this.$emit("submit",this.student),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log("验证失败");case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(){return e.apply(this,arguments)}return t}()}},u=i,c=s("17cc"),o=Object(c["a"])(u,n,r,!1,null,"62673dbf",null);t["a"]=o.exports},cc80:function(e,t,s){e.exports=s("5ab7")}}]);
//# sourceMappingURL=chunk-6943c3ac.a77f067b.js.map