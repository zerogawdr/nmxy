# TS概述课堂笔记

> https://www.tslang.cn/ 中文网
> http://www.typescriptlang.org/ 官网

# JS语言的问题

null、undefined， 价值千万的缺陷

计算机语言：人与计算机沟通的工具

1. 供人阅读
2. 供机器执行（解释器、编译器）

什么是好的计算机语言：唯一标准，是否具有生产力（能够降低开发成本，往往是时间成本）

微软开发的运行在IE浏览器端的语言：VBScript、J#

造轮子

java语言：啰嗦

开发时间 = 分析时间 + 编码时间 + 调试时间（改错, 30%-50%）

如何减少调试时间

1. 使用先进的调试工具
2. 尽量减少犯错的几率

JS语言很容易犯错 —— 弱类型语言，没有类型检查

XX网站统计2018年前端开发最常见的10个错误： 7个类型错误


JS语言的问题：

1. 容易导致类型错误
2. 会导致编辑器很难进行智能提示（autocomplete），需要参照官方文档完成代码编写
3. 团队协作上，完全依赖注释、文档

根源：类型检查

TypeScript：给js加入了类型检查

# TypeScript的特点

简称：TS

- 强大的类型检查系统

- 减少了大量不应该出现的类型错误

- 大幅度提升编辑器的智能提示，绝大部分时候，开发者都可以完全信任智能提示

- 有了类型检查，可以在项目应用更多的成熟的OO（面向对象）模式，会潜移默化的改变开发者的开发思想

- TS是JS的超集，所有的JS功能、API、语法都能在TS中直接使用，只是加入了跟类型约束相关的功能。

- TS如何在node和浏览器环境中执行？TS的编译器：TSC（TypeScript Compiler），可以将TS代码编译成为JS代码。（类似于babel）

- TS是微软公司研发的语言，Anders Hejlsberg（安德斯·海尔斯伯格， C#之父），2012年发布，目前版本3.3

- 微软的态度：开源、拥抱标准

- 很多的第三方库，正在转向使用TS重构。其他的第三方库，可以使用TS官方的开源类型库来完成类型检查。

Vue3.0 几乎全部使用TS代码进行了重构

整数是正整数的超集

使用TS：

- 降低了调试时间
- 更利于团队协作
- 迁移成本低（JS写的代码 --> TS）

# TS的开发环境搭建（nodejs环境）

node：ts-node -g   cnpm i -g nodemon      使用 nodemon  --exec ts-node xxx.ts文件 就可以监控ts文件的变化

浏览器端：webpack + ts-loader

- 全局变量冲突的错误

默认情况下，ts认为，我们所处的开发环境是浏览器环境。并且，认为我们写的代码是在全局环境中运行的。并且，认为我们的代码会被编译成为ES3。

ts如果发现，代码中包含import、export，会认为该文件处于模块中，文件中的所有变量都是模块的内部变量。

更好的做法：通过修改配置，改变ts的认知。

ts的配置文件：tsconfig.json，可以通过tsc --init来生成该文件

还需要安装node的类型库，该类型库的作用，用于定义全局的node对象类型，以及node官方核心包中的类型 cnpm i -D @types/node

希望：

1. 开发的时候不要生成编译结果（类似于webpack的开发服务器，html-dev-server）
2. 一个命令完成编译和运行

# TS基础

类型检查 前提：类型的约束

ts的类型约束基于一个理念：当一个东西定义（声明）时，声明者非常清楚它的结构（类型），所以，声明者应该再声明时约束它的类型。

具体的约束方式，```:类型```

TS中，支持所有JS原始类型：number、string、array、object、null、boolean、undefined

如果约束为数组类型，需要指定数组中每一项的类型

```<T>```叫做泛型。

ts中可以使用元祖```tuple```，来限制数组的长度以及数组每一项的类型

若某个变量，可以是多种类型中的一种，可以使用联合类型

通常，不会使用```object```来约束类型，因为过于宽泛。

通常，使用```void```标记那些没有返回值的函数

如果使用never类型约束函数的返回值。表示，该函数要么永远无法运行结束 或 函数一定抛出一个错误。

函数签名 = 函数名 + 参数 + 返回类型

类型推断可以减轻类型约束的负担，通常发生函数返回值推断和变量初始化推断

any表示任何类型，使用该约束，相当于告诉ts，不要对其进行任何检查。

给参数名后添加问号，表示可选参数，可选参数必须是参数列表的末尾